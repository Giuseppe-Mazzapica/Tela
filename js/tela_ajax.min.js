var Tela={};(function(e,a,c,b,d){b.Ajax={run:function(h,g,i){if(typeof h!=="string"||h===""){return false}if(i===null||typeof i!=="object"){i={}}if(g===null||typeof g!=="object"){g={}}if(typeof c.nonces[h]==="undefined"){c.nonces[h]=""}var f=e.extend(i,{url:a.url,data:{telaajax_action:h,telaajax_nonce:c.nonces[h],telaajax_data:g},type:"POST"});return e.ajax(f)},updateHtml:function(f){f=e.extend({target:null,action:null,data:null,settings:null},f);if(f.settings===null||typeof f.settings!=="object"){f.settings={}}if(!e(f.target).length){return false}f.settings.dataType="html";return this.run(f.action,f.data,f.settings).done(function(g){e(f.target).html(g)})},jsonEvent:function(f,i,h,g){if(typeof f!=="string"||f===""){return}if(g===null||typeof g!=="object"){g={}}g.dataType="json";return this.run(i,h,g).done(function(j){e(d).trigger(f,j)})}};b.PluginHelpers={init:function(f){var g={action:null,data:{},ajax:{},event:null,updateOn:null,subject:null,done:null,fail:null,always:null};f=e.extend(g,f);if(typeof f.action!=="string"||f.action===""){f.action=e(this).data("tela-action")}if(typeof f.event!=="string"||f.event===""){f.event=e(this).data("tela-event")}if(typeof f.event!=="string"||f.event===""){return this}if(typeof f.subject!=="string"||f.subject===""){f.subject=e(this).data("tela-subject")}if(typeof f.subject==="string"&&f.subject!==""){f.updateOn="subject-event"}else{if(typeof f.updateOn!=="string"||f.updateOn===""){f.updateOn=e(this).data("tela-update-on")}}return f},getPostData:function(f){f=e.extend({source:null,context:null,options:null},f);var g={};if(e.isFunction(f.source)){if(typeof f.context!=="object"){f.context=this}if(typeof f.options==="undefined"){f.options=null}g=f.source.apply(f.context,[f.options])}else{if(typeof f.source==="object"){g=f.source}}return g},getSelector:function(){var f=e(this).data("tela-selector");if(typeof f!=="string"||f===""){var g=e(this).attr("id");if(typeof g==="string"&&g!==""){f="#"+g}}return(typeof f!=="string"||f==="")?false:f},response:function(f,g){if(typeof f!=="object"){return false}if(e.isFunction(g.done)){f.done(g.done)}if(e.isFunction(g.fail)){f.fail(g.done)}if(e.isFunction(g.always)){f.always(g.always)}return f},runCallerAction:function(i,k){var h={source:k.data,context:i};var j=b.PluginHelpers.getPostData.apply(i,[h]);var f=[k.action,j,k.ajax];var g=b.Ajax.run.apply(b.Ajax,f);return b.PluginHelpers.response(g,k)}};b.PluginMethods={subjectEvent:function(g){var f=this;if(typeof g.subject==="string"&&g.subject!==""){var h=this;e(document).on(g.event,g.subject,function(){var i={source:g.data,context:this};var j={target:h,action:g.action,data:b.PluginHelpers.getPostData.apply(f,[i]),settings:g.ajax};return b.Ajax.updateHtml.apply(b.Ajax,[j])})}},globalEvent:function(g){var f=this;var h=g.updateOn==="global-event"?e(d):e(document);h.on(g.event,function(){var i={source:g.data,context:f,options:arguments};var j={target:f,action:g.action,data:b.PluginHelpers.getPostData.apply(f,[i]),settings:g.ajax};return b.Ajax.updateHtml.apply(b.Ajax,[j])})},selfEvent:function(g){var f=this;e(this).on(g.event,function(){var h={source:g.data,context:f};var i={target:f,action:g.action,data:b.PluginHelpers.getPostData.apply(f,[h]),settings:g.ajax};return b.Ajax.updateHtml.apply(b.Ajax,[i])})},runAction:function(h){var g=this;var f=b.PluginHelpers.getSelector.apply(g);if(typeof f==="string"&&f!==""){e(document).on(h.event,f,function(){return b.PluginHelpers.runCallerAction(this,[g,h])})}else{e(g).on(h.event,function(){return b.PluginHelpers.runCallerAction(this,[g,h])})}}};e.fn.telaAjax=function(f){f=b.PluginHelpers.init.apply(this,[f]);switch(f.updateOn){case"subject-event":return b.PluginMethods.subjectEvent.apply(this,[f]);case"global-event":case"document-event":return b.PluginMethods.globalEvent.apply(this,[f]);case"self-event":return b.PluginMethods.selfEvent.apply(this,[f]);default:return b.PluginMethods.runAction.apply(this,[f])}return this}})(jQuery,TelaAjaxUrl,TelaAjaxNonces,Tela,window);
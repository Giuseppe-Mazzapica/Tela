var TelaAjax={};(function(e,b,c,a,d){a.Ajax={run:function(h,g,i){if(typeof h!=="string"||h===""){return false}if(i===null||typeof i!=="object"){i={}}if(g===null||typeof g!=="object"){g={}}if(typeof c.nonces[h]==="undefined"){c.nonces[h]=""}var f=e.extend(i,{url:b.url,data:{telaajax_is_admin:b.is_admin,telaajax_action:h,telaajax_nonce:c.nonces[h],telaajax_data:g},type:"POST"});return e.ajax(f)},updateHtml:function(f){f=e.extend({target:null,action:null,data:null,settings:null},f);if(f.settings===null||typeof f.settings!=="object"){f.settings={}}if(!e(f.target).length){return false}f.settings.dataType="html";return this.run(f.action,f.data,f.settings).done(function(g){e(f.target).html(g)})},updateDataMap:function(g){var h={target:{},action:"",data:{},settings:{},html:true,parseCb:null};g=e.extend(h,g);if(g.settings===null||typeof g.settings!=="object"){g.settings={}}var f=e(g.target);if(!f.length||!f.find("[data-tela-map]").length){return false}g.settings.dataType="json";return this.run(g.action,g.data,g.settings).done(function(i){a.Ajax.parseDataMap.apply(g.target,[i,g])})},parseDataMap:function(g,f){if(e.isFunction(f.parseCb)){g=f.parseCb.apply(f.target,[g,f.target,f.data])}var h=e(f.target);e.each(g,function(k,j){if(typeof j==="string"){var i=h.find('[data-tela-map="'+k+'"]');if(i.length&&f.html){i.html(j)}else{if(i.length&&!f.html){i.text(j)}}}})},jsonEvent:function(f,i,h,g){if(typeof f!=="string"||f===""){return}if(g===null||typeof g!=="object"){g={}}g.dataType="json";return this.run(i,h,g).done(function(j){e(d).trigger(f,j)})}};a.PluginHelpers={init:function(f){var g={action:null,data:{},ajax:{},html:true,parseCb:null,event:null,updateOn:null,subject:null,done:null,fail:null,always:null};f=e.extend(g,f);if(typeof f.action!=="string"||f.action===""){f.action=e(this).data("tela-action")}if(typeof f.event!=="string"||f.event===""){f.event=e(this).data("tela-event")}if(typeof f.event!=="string"||f.event===""){return this}if(typeof f.subject!=="string"||f.subject===""){f.subject=e(this).data("tela-subject")}if(typeof f.subject==="string"&&f.subject!==""){f.updateOn="subject-event"}else{if(typeof f.updateOn!=="string"||f.updateOn===""){f.updateOn=e(this).data("tela-update-on")}}if(typeof e(this).data("tela-map-html")!=="undefined"){f.html=e(this).data("tela-map-html")}if(!e.isFunction(f.parseCb)){var h=e(this).data("tela-map-callback");if(e.isFunction(d[h])){f.parseCb=d[h]}}return f},getPostData:function(f){f=e.extend({source:null,context:null,options:null},f);var g={};if(e.isFunction(f.source)){if(typeof f.context!=="object"){f.context=this}if(typeof f.options==="undefined"){f.options=null}g=f.source.apply(f.context,[f.options])}else{if(typeof f.source==="object"){g=f.source}}return g},getSelector:function(){var f=e(this).data("tela-selector");if(typeof f!=="string"||f===""){var g=e(this).attr("id");if(typeof g==="string"&&g!==""){f="#"+g}}return(typeof f!=="string"||f==="")?false:f},response:function(f,g){if(typeof f!=="object"){return false}if(e.isFunction(g.done)){f.done(g.done)}if(e.isFunction(g.fail)){f.fail(g.fail)}if(e.isFunction(g.always)){f.always(g.always)}return f},runCallerUpdate:function(i,k,j,f){var h={target:k,action:j.action,data:a.PluginHelpers.getPostData.apply(i,[f]),settings:j.ajax,html:j.html,parseCb:j.parseCb};var g={};if(typeof i.data("tela-bind-map")!=="undefined"){g=a.Ajax.updateDataMap.apply(a.Ajax,[h])}else{g=a.Ajax.updateHtml.apply(a.Ajax,[h])}return a.PluginHelpers.response(g,h.settings)},runCallerAction:function(i,k){var h={source:k.data,context:i};var j=a.PluginHelpers.getPostData.apply(i,[h]);var f=[k.action,j,k.ajax];var g=a.Ajax.run.apply(a.Ajax,f);return a.PluginHelpers.response(g,k)}};a.PluginMethods={subjectEvent:function(g){var f=this;if(typeof g.subject==="string"&&g.subject!==""){var h=this;e(document).on(g.event,g.subject,function(){var i={source:g.data,context:this};var j=[f,h,g,i];return a.PluginHelpers.runCallerUpdate.apply(this,j)})}},globalEvent:function(g){var f=this;var h=g.updateOn==="global-event"?e(d):e(document);h.on(g.event,function(){var i={source:g.data,context:f,options:arguments};var j=[f,f,g,i];return a.PluginHelpers.runCallerUpdate.apply(this,j)})},selfEvent:function(g){var f=this;e(this).on(g.event,function(){var h={source:g.data,context:f};var i=[f,f,g,h];return a.PluginHelpers.runCallerUpdate.apply(this,i)})},runAction:function(h){var g=this;var f=a.PluginHelpers.getSelector.apply(g);if(typeof f==="string"&&f!==""){e(document).on(h.event,f,function(){return a.PluginHelpers.runCallerAction.apply(this,[g,h])})}else{e(g).on(h.event,function(){return a.PluginHelpers.runCallerAction.apply(this,[g,h])})}}};e.fn.telaAjax=function(f){f=a.PluginHelpers.init.apply(this,[f]);switch(f.updateOn){case"subject-event":return a.PluginMethods.subjectEvent.apply(this,[f]);case"global-event":case"document-event":return a.PluginMethods.globalEvent.apply(this,[f]);case"self-event":return a.PluginMethods.selfEvent.apply(this,[f]);default:return a.PluginMethods.runAction.apply(this,[f])}return this}})(jQuery,TelaAjaxData,TelaAjaxNonces,TelaAjax,window);